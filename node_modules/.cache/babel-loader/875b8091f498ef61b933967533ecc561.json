{"ast":null,"code":"import _toConsumableArray from\"/Users/mac/Documents/Ingenieria/11vo Semestre/Taller de Integracio\\u0301n/Tarea 3/tarea3_taller_integracion/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _classCallCheck from\"/Users/mac/Documents/Ingenieria/11vo Semestre/Taller de Integracio\\u0301n/Tarea 3/tarea3_taller_integracion/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/mac/Documents/Ingenieria/11vo Semestre/Taller de Integracio\\u0301n/Tarea 3/tarea3_taller_integracion/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/mac/Documents/Ingenieria/11vo Semestre/Taller de Integracio\\u0301n/Tarea 3/tarea3_taller_integracion/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/mac/Documents/Ingenieria/11vo Semestre/Taller de Integracio\\u0301n/Tarea 3/tarea3_taller_integracion/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/mac/Documents/Ingenieria/11vo Semestre/Taller de Integracio\\u0301n/Tarea 3/tarea3_taller_integracion/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React from\"react\";//import { Map, Marker, Popup, TileLayer, Polyline } from \"react-leaflet\";\n//import { Icon } from \"leaflet\";\n//import * as parkData from \"./data/skateboard-parks.json\";\nimport\"./App.css\";import MapaMundi from\"./Map.js\";import Planes from\"./Planes.js\";import MyForm from\"./Chat.js\";//import Planes from \"./Planes\"\nvar io=require(\"socket.io-client\");var socket=io.connect('ws://tarea-3-websocket.2021-1.tallerdeintegracion.cl',{path:'/flights'});document.body.style.backgroundColor=\"rgb(21, 23, 25)\";var App=/*#__PURE__*/function(_React$Component){_inherits(App,_React$Component);function App(props){var _this;_classCallCheck(this,App);_this=_possibleConstructorReturn(this,_getPrototypeOf(App).call(this,props));_this.getInfo=function(e){e.preventDefault();socket.emit('FLIGHTS',\"\");socket.on('FLIGHTS',function(message){console.log(message);_this.setState({flights:message});});};_this.quitInfo=function(e){e.preventDefault();_this.setState({flights:[]});};_this.state={flights:[],userName:\"\",isLogged:false,messages:[],position:[]};return _this;}_createClass(App,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;socket.on(\"POSITION\",function(position){if(_this2.state.position.some(function(e){return e.code===position.code;})){var new_position=_this2.state.position.slice();var index=new_position.findIndex(function(e){return e.code===position.code;});new_position[index]=position;_this2.setState({position:new_position});}else _this2.setState(function(state){return{position:[].concat(_toConsumableArray(state.position),[position])};});//this.state.position.push(position)\n});}},{key:\"render\",value:function render(){return React.createElement(\"div\",{class:\"root\"},React.createElement(\"div\",null,React.createElement(MapaMundi,{flights:this.state.flights,position:this.state.position})),React.createElement(\"div\",{class:\"information\"},React.createElement(Planes,{getInfo:this.getInfo,quitInfo:this.quitInfo,flights:this.state.flights})),React.createElement(\"div\",{class:\"chat\"},React.createElement(MyForm,null)));}}]);return App;}(React.Component);export{App as default};","map":{"version":3,"sources":["/Users/mac/Documents/Ingenieria/11vo Semestre/Taller de IntegracioÌn/Tarea 3/tarea3_taller_integracion/src/App.js"],"names":["React","MapaMundi","Planes","MyForm","io","require","socket","connect","path","document","body","style","backgroundColor","App","props","getInfo","e","preventDefault","emit","on","message","console","log","setState","flights","quitInfo","state","userName","isLogged","messages","position","some","code","new_position","slice","index","findIndex","Component"],"mappings":"k2CAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA;AACA;AACA;AACA,MAAO,WAAP,CACA,MAAOC,CAAAA,SAAP,KAAsB,UAAtB,CACA,MAAOC,CAAAA,MAAP,KAAmB,aAAnB,CACA,MAAOC,CAAAA,MAAP,KAAmB,WAAnB,CACA;AAEA,GAAMC,CAAAA,EAAE,CAAGC,OAAO,CAAC,kBAAD,CAAlB,CACA,GAAMC,CAAAA,MAAM,CAAGF,EAAE,CAACG,OAAH,CAAW,sDAAX,CAAmE,CAC9EC,IAAI,CAAC,UADyE,CAAnE,CAAf,CAGAC,QAAQ,CAACC,IAAT,CAAcC,KAAd,CAAoBC,eAApB,CAAoC,iBAApC,C,GAEqBC,CAAAA,G,yEAEnB,aAAYC,KAAZ,CAAmB,qCACjB,qEAAMA,KAAN,GADiB,MA2BnBC,OA3BmB,CA2BT,SAACC,CAAD,CAAO,CACfA,CAAC,CAACC,cAAF,GACAX,MAAM,CAACY,IAAP,CAAY,SAAZ,CAAsB,EAAtB,EACAZ,MAAM,CAACa,EAAP,CAAU,SAAV,CAAqB,SAAAC,OAAO,CAAI,CAC9BC,OAAO,CAACC,GAAR,CAAYF,OAAZ,EACA,MAAKG,QAAL,CAAc,CAAEC,OAAO,CAAEJ,OAAX,CAAd,EACD,CAHD,EAID,CAlCkB,OAoCnBK,QApCmB,CAoCR,SAACT,CAAD,CAAO,CAChBA,CAAC,CAACC,cAAF,GACA,MAAKM,QAAL,CAAc,CAAEC,OAAO,CAAE,EAAX,CAAd,EAED,CAxCkB,CAEjB,MAAKE,KAAL,CAAY,CACVF,OAAO,CAAE,EADC,CAEVG,QAAQ,CAAE,EAFA,CAGVC,QAAQ,CAAE,KAHA,CAIVC,QAAQ,CAAE,EAJA,CAKVC,QAAQ,CAAE,EALA,CAAZ,CAFiB,aASlB,C,6EAEkB,iBACjBxB,MAAM,CAACa,EAAP,CAAU,UAAV,CAAsB,SAAAW,QAAQ,CAAI,CAChC,GAAG,MAAI,CAACJ,KAAL,CAAWI,QAAX,CAAoBC,IAApB,CAAyB,SAAAf,CAAC,QAAIA,CAAAA,CAAC,CAACgB,IAAF,GAAWF,QAAQ,CAACE,IAAxB,EAA1B,CAAH,CAA4D,CAE1D,GAAIC,CAAAA,YAAY,CAAG,MAAI,CAACP,KAAL,CAAWI,QAAX,CAAoBI,KAApB,EAAnB,CACA,GAAIC,CAAAA,KAAK,CAAGF,YAAY,CAACG,SAAb,CAAuB,SAAApB,CAAC,QAAIA,CAAAA,CAAC,CAACgB,IAAF,GAAWF,QAAQ,CAACE,IAAxB,EAAxB,CAAZ,CACAC,YAAY,CAACE,KAAD,CAAZ,CAAoBL,QAApB,CACA,MAAI,CAACP,QAAL,CAAc,CAAEO,QAAQ,CAAEG,YAAZ,CAAd,EAED,CAPD,IAQE,CAAA,MAAI,CAACV,QAAL,CAAc,SAACG,KAAD,QAAY,CAAEI,QAAQ,8BAAMJ,KAAK,CAACI,QAAZ,GAAsBA,QAAtB,EAAV,CAAZ,EAAd,EACA;AACH,CAXD,EAaD,C,uCAiBS,CACR,MACE,4BAAK,KAAK,CAAC,MAAX,EACE,+BACE,oBAAC,SAAD,EACA,OAAO,CAAG,KAAKJ,KAAL,CAAWF,OADrB,CAEA,QAAQ,CAAG,KAAKE,KAAL,CAAWI,QAFtB,EADF,CADF,CAOE,2BAAK,KAAK,CAAC,aAAX,EACE,oBAAC,MAAD,EACA,OAAO,CAAG,KAAKf,OADf,CAEA,QAAQ,CAAG,KAAKU,QAFhB,CAGA,OAAO,CAAG,KAAKC,KAAL,CAAWF,OAHrB,EADF,CAPF,CAcE,2BAAK,KAAK,CAAC,MAAX,EACE,oBAAC,MAAD,MADF,CAdF,CADF,CAqBD,C,iBAlE8BxB,KAAK,CAACqC,S,SAAlBxB,G","sourcesContent":["import React from \"react\";\n//import { Map, Marker, Popup, TileLayer, Polyline } from \"react-leaflet\";\n//import { Icon } from \"leaflet\";\n//import * as parkData from \"./data/skateboard-parks.json\";\nimport \"./App.css\";\nimport MapaMundi from \"./Map.js\"\nimport Planes from \"./Planes.js\";\nimport MyForm from \"./Chat.js\";\n//import Planes from \"./Planes\"\n\nconst io = require(\"socket.io-client\")\nconst socket = io.connect('ws://tarea-3-websocket.2021-1.tallerdeintegracion.cl', {\n    path:'/flights'\n});\ndocument.body.style.backgroundColor=\"rgb(21, 23, 25)\"\n\nexport default class App extends React.Component {\n  \n  constructor(props) {\n    super(props);\n    this.state= {\n      flights: [],\n      userName: \"\",\n      isLogged: false,\n      messages: [],\n      position: []\n    }\n  }\n\n  componentDidMount(){\n    socket.on(\"POSITION\", position => {\n      if(this.state.position.some(e => e.code === position.code)) {\n\n        let new_position = this.state.position.slice()\n        let index = new_position.findIndex(e => e.code === position.code)\n        new_position[index]=position\n        this.setState({ position: new_position })\n\n      } else\n        this.setState((state) => ({ position: [...state.position, position]}))\n        //this.state.position.push(position)\n    })\n   \n  }\n\n  getInfo = (e) => {\n    e.preventDefault();\n    socket.emit('FLIGHTS',\"\");\n    socket.on('FLIGHTS', message => {\n      console.log(message);\n      this.setState({ flights: message })\n    })\n  }\n\n  quitInfo = (e) => {\n    e.preventDefault();\n    this.setState({ flights: []})\n    \n  }\n\n  render () {\n    return(\n      <div class=\"root\">\n        <div>\n          <MapaMundi\n          flights= {this.state.flights}\n          position= {this.state.position}\n          />\n        </div>\n        <div class=\"information\">\n          <Planes\n          getInfo= {this.getInfo}\n          quitInfo= {this.quitInfo}\n          flights= {this.state.flights}\n          />\n        </div>\n        <div class=\"chat\">\n          <MyForm/>\n        </div>\n      </div>\n\n    )\n  }\n}\n"]},"metadata":{},"sourceType":"module"}