{"ast":null,"code":"import _toConsumableArray from\"/Users/mac/Documents/Ingenieria/11vo Semestre/Taller de Integracio\\u0301n/Tarea 3/tarea3_taller_integracion/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _classCallCheck from\"/Users/mac/Documents/Ingenieria/11vo Semestre/Taller de Integracio\\u0301n/Tarea 3/tarea3_taller_integracion/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/mac/Documents/Ingenieria/11vo Semestre/Taller de Integracio\\u0301n/Tarea 3/tarea3_taller_integracion/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/mac/Documents/Ingenieria/11vo Semestre/Taller de Integracio\\u0301n/Tarea 3/tarea3_taller_integracion/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/mac/Documents/Ingenieria/11vo Semestre/Taller de Integracio\\u0301n/Tarea 3/tarea3_taller_integracion/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/mac/Documents/Ingenieria/11vo Semestre/Taller de Integracio\\u0301n/Tarea 3/tarea3_taller_integracion/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React from'react';//import { w3cwebsocket as W3CWebSocket } from \"websocket\";\nimport{Card,Avatar,Input,Typography}from'antd';import'antd/dist/antd.css';var Search=Input.Search;var Text=Typography.Text;var Meta=Card.Meta;var io=require(\"socket.io-client\");var socket=io.connect('ws://tarea-3-websocket.2021-1.tallerdeintegracion.cl',{path:'/flights'});var MyForm=/*#__PURE__*/function(_React$Component){_inherits(MyForm,_React$Component);function MyForm(){var _getPrototypeOf2;var _this;_classCallCheck(this,MyForm);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(MyForm)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={userName:'',isLoggedIn:false,messages:[]};_this.onButtonClicked=function(value){var payload={name:_this.state.userName,message:value};socket.emit('CHAT',payload);_this.setState({searchVal:''});};return _this;}_createClass(MyForm,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;socket.on('CHAT',function(message){_this2.setState(function(state){return{messages:[].concat(_toConsumableArray(state.messages),[{msg:message.message,user:message.name,date:new Date(message.date)}])};});});}},{key:\"render\",value:function render(){var _this3=this;return React.createElement(\"div\",{className:\"main\",id:\"wrapper\"},this.state.isLoggedIn?React.createElement(\"div\",{id:\"scroller\"},React.createElement(\"div\",{className:\"title\"},React.createElement(Text,{id:\"main-heading\",type:\"secondary\",style:{fontSize:'36px'}},React.createElement(\"strong\",null,\"Centro de Control:\"),\" \",this.state.userName)),React.createElement(\"div\",{style:{MozUserFocus:\"end\",display:'flex',flexDirection:'column',paddingBottom:50},id:\"messages\",className:\"messages\"},this.state.messages.map(function(message){return React.createElement(Card,{key:message.msg,style:{width:300,margin:'16px 4px 0 4px',alignSelf:_this3.state.userName===message.user?'flex-end':'flex-start'},loading:false},React.createElement(Meta,{avatar:React.createElement(Avatar,{style:{color:'#f56a00',backgroundColor:'#fde3cf'}},message.user[0].toUpperCase()),title:message.user+\" : \"+message.date,description:message.msg}));})),React.createElement(\"div\",{className:\"bottom\"},React.createElement(Search,{placeholder:\"Escribe un mensaje y envialo...\",enterButton:\"Enviar\",value:this.state.searchVal,size:\"large\",onChange:function onChange(e){return _this3.setState({searchVal:e.target.value});},onSearch:function onSearch(value){return _this3.onButtonClicked(value);}}))):React.createElement(\"div\",{style:{padding:'200px 40px'}},React.createElement(Text,{id:\"main-heading\",type:\"secondary\",style:{fontSize:'36px',color:\"white\"}},\"Introduce tu nombre de usuario:\"),React.createElement(\"br\",null),React.createElement(\"br\",null),React.createElement(\"br\",null),React.createElement(\"br\",null),React.createElement(Search,{placeholder:\"Escribe tu nombre...\",enterButton:\"Registrate\",size:\"large\",onSearch:function onSearch(value){return _this3.setState({isLoggedIn:true,userName:value});}})));}}]);return MyForm;}(React.Component);export{MyForm as default};","map":{"version":3,"sources":["/Users/mac/Documents/Ingenieria/11vo Semestre/Taller de Integración/Tarea 3/tarea3_taller_integracion/src/Chat.js"],"names":["React","Card","Avatar","Input","Typography","Search","Text","Meta","io","require","socket","connect","path","MyForm","state","userName","isLoggedIn","messages","onButtonClicked","value","payload","name","message","emit","setState","searchVal","on","msg","user","date","Date","fontSize","MozUserFocus","display","flexDirection","paddingBottom","map","width","margin","alignSelf","color","backgroundColor","toUpperCase","e","target","padding","Component"],"mappings":"k2CAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA;AACA,OAASC,IAAT,CAAeC,MAAf,CAAuBC,KAAvB,CAA8BC,UAA9B,KAAgD,MAAhD,CACA,MAAO,oBAAP,C,GAGQC,CAAAA,M,CAAWF,K,CAAXE,M,IACAC,CAAAA,I,CAASF,U,CAATE,I,IACAC,CAAAA,I,CAASN,I,CAATM,I,CAER,GAAMC,CAAAA,EAAE,CAAGC,OAAO,CAAC,kBAAD,CAAlB,CACA,GAAMC,CAAAA,MAAM,CAAGF,EAAE,CAACG,OAAH,CAAW,sDAAX,CAAmE,CAC9EC,IAAI,CAAC,UADyE,CAAnE,CAAf,C,GAIqBC,CAAAA,M,2YAEjBC,K,CAAQ,CACJC,QAAQ,CAAE,EADN,CAEJC,UAAU,CAAE,KAFR,CAGJC,QAAQ,CAAE,EAHN,C,OAmBRC,e,CAAkB,SAACC,KAAD,CAAW,CAE3B,GAAIC,CAAAA,OAAO,CAAG,CACZC,IAAI,CAAE,MAAKP,KAAL,CAAWC,QADL,CAEZO,OAAO,CAAEH,KAFG,CAAd,CAKAT,MAAM,CAACa,IAAP,CAAY,MAAZ,CAAoBH,OAApB,EACA,MAAKI,QAAL,CAAc,CAAEC,SAAS,CAAE,EAAb,CAAd,EAED,C,+FAvBmB,iBAElBf,MAAM,CAACgB,EAAP,CAAU,MAAV,CAAkB,SAAAJ,OAAO,CAAG,CAC1B,MAAI,CAACE,QAAL,CAAc,SAACV,KAAD,QACX,CAAEG,QAAQ,8BAAMH,KAAK,CAACG,QAAZ,GACP,CAACU,GAAG,CAAEL,OAAO,CAACA,OAAd,CACAM,IAAI,CAAEN,OAAO,CAACD,IADd,CAEAQ,IAAI,CAAE,GAAIC,CAAAA,IAAJ,CAASR,OAAO,CAACO,IAAjB,CAFN,CADO,EAAV,CADW,EAAd,EAOD,CARD,EASD,C,uCAcQ,iBACL,MACE,4BAAK,SAAS,CAAC,MAAf,CAAsB,EAAE,CAAC,SAAzB,EACG,KAAKf,KAAL,CAAWE,UAAX,CACD,2BAAK,EAAE,CAAC,UAAR,EACE,2BAAK,SAAS,CAAC,OAAf,EACE,oBAAC,IAAD,EAAM,EAAE,CAAC,cAAT,CAAwB,IAAI,CAAC,WAA7B,CAAyC,KAAK,CAAE,CAAEe,QAAQ,CAAE,MAAZ,CAAhD,EAAsE,uDAAtE,KAA2G,KAAKjB,KAAL,CAAWC,QAAtH,CADF,CADF,CAIE,2BAAK,KAAK,CAAE,CAAEiB,YAAY,CAAC,KAAf,CAAsBC,OAAO,CAAE,MAA/B,CAAuCC,aAAa,CAAE,QAAtD,CAAgEC,aAAa,CAAE,EAA/E,CAAZ,CAAiG,EAAE,CAAC,UAApG,CAA+G,SAAS,CAAC,UAAzH,EACG,KAAKrB,KAAL,CAAWG,QAAX,CAAoBmB,GAApB,CAAwB,SAAAd,OAAO,QAC9B,qBAAC,IAAD,EAAM,GAAG,CAAEA,OAAO,CAACK,GAAnB,CAAwB,KAAK,CAAE,CAAEU,KAAK,CAAE,GAAT,CAAcC,MAAM,CAAE,gBAAtB,CAAwCC,SAAS,CAAE,MAAI,CAACzB,KAAL,CAAWC,QAAX,GAAwBO,OAAO,CAACM,IAAhC,CAAuC,UAAvC,CAAoD,YAAvG,CAA/B,CAAsJ,OAAO,CAAE,KAA/J,EACE,oBAAC,IAAD,EACE,MAAM,CACJ,oBAAC,MAAD,EAAQ,KAAK,CAAE,CAAEY,KAAK,CAAE,SAAT,CAAoBC,eAAe,CAAE,SAArC,CAAf,EAAkEnB,OAAO,CAACM,IAAR,CAAa,CAAb,EAAgBc,WAAhB,EAAlE,CAFJ,CAIE,KAAK,CAAEpB,OAAO,CAACM,IAAR,CAAe,KAAf,CAAuBN,OAAO,CAACO,IAJxC,CAKE,WAAW,CAAEP,OAAO,CAACK,GALvB,EADF,CAD8B,EAA/B,CADH,CAJF,CAiBE,2BAAK,SAAS,CAAC,QAAf,EACE,oBAAC,MAAD,EACE,WAAW,CAAC,iCADd,CAEE,WAAW,CAAC,QAFd,CAGE,KAAK,CAAE,KAAKb,KAAL,CAAWW,SAHpB,CAIE,IAAI,CAAC,OAJP,CAKE,QAAQ,CAAE,kBAACkB,CAAD,QAAO,CAAA,MAAI,CAACnB,QAAL,CAAc,CAAEC,SAAS,CAAEkB,CAAC,CAACC,MAAF,CAASzB,KAAtB,CAAd,CAAP,EALZ,CAME,QAAQ,CAAE,kBAAAA,KAAK,QAAI,CAAA,MAAI,CAACD,eAAL,CAAqBC,KAArB,CAAJ,EANjB,EADF,CAjBF,CADC,CA8BD,2BAAK,KAAK,CAAE,CAAE0B,OAAO,CAAE,YAAX,CAAZ,EACE,oBAAC,IAAD,EAAM,EAAE,CAAC,cAAT,CAAwB,IAAI,CAAC,WAA7B,CAAyC,KAAK,CAAE,CAAEd,QAAQ,CAAE,MAAZ,CAAoBS,KAAK,CAAC,OAA1B,CAAhD,oCADF,CAEE,8BAFF,CAEW,8BAFX,CAEoB,8BAFpB,CAE6B,8BAF7B,CAGE,oBAAC,MAAD,EACE,WAAW,CAAC,sBADd,CAEE,WAAW,CAAC,YAFd,CAGE,IAAI,CAAC,OAHP,CAIE,QAAQ,CAAE,kBAAArB,KAAK,QAAI,CAAA,MAAI,CAACK,QAAL,CAAc,CAAER,UAAU,CAAE,IAAd,CAAoBD,QAAQ,CAAEI,KAA9B,CAAd,CAAJ,EAJjB,EAHF,CA/BF,CADF,CA6CH,C,oBA/E+BnB,KAAK,CAAC8C,S,SAArBjC,M","sourcesContent":["import React from 'react';\n//import { w3cwebsocket as W3CWebSocket } from \"websocket\";\nimport { Card, Avatar, Input, Typography } from 'antd';\nimport 'antd/dist/antd.css';\n\n\nconst { Search } = Input;\nconst { Text } = Typography;\nconst { Meta } = Card;\n\nconst io = require(\"socket.io-client\")\nconst socket = io.connect('ws://tarea-3-websocket.2021-1.tallerdeintegracion.cl', {\n    path:'/flights'\n});\n\nexport default class MyForm extends React.Component {\n\n    state = {\n        userName: '',\n        isLoggedIn: false,\n        messages: []\n    }\n\n    componentDidMount() {\n\n      socket.on('CHAT', message =>{\n        this.setState((state) =>\n          ({ messages: [...state.messages,\n              {msg: message.message,\n              user: message.name,\n              date: new Date(message.date)}\n            ]})\n          );\n      });\n    };\n\n    onButtonClicked = (value) => {\n\n      var payload = {\n        name: this.state.userName,\n        message: value\n      }\n\n      socket.emit('CHAT', payload);\n      this.setState({ searchVal: '' })\n\n    }\n\n    render() {\n        return (\n          <div className=\"main\" id='wrapper'>\n            {this.state.isLoggedIn ?\n            <div id=\"scroller\">\n              <div className=\"title\">\n                <Text id=\"main-heading\" type=\"secondary\" style={{ fontSize: '36px' }}><strong>Centro de Control:</strong> {this.state.userName}</Text>\n              </div>\n              <div style={{ MozUserFocus:\"end\", display: 'flex', flexDirection: 'column', paddingBottom: 50 }} id=\"messages\" className=\"messages\">\n                {this.state.messages.map(message => \n                  <Card key={message.msg} style={{ width: 300, margin: '16px 4px 0 4px', alignSelf: this.state.userName === message.user ? 'flex-end' : 'flex-start' }} loading={false}>\n                    <Meta\n                      avatar={\n                        <Avatar style={{ color: '#f56a00', backgroundColor: '#fde3cf' }}>{message.user[0].toUpperCase()}</Avatar>\n                      }\n                      title={message.user + \" : \" + message.date}\n                      description={message.msg}\n                    />\n                  </Card> \n                )}\n              </div>\n              <div className=\"bottom\">\n                <Search\n                  placeholder=\"Escribe un mensaje y envialo...\"\n                  enterButton=\"Enviar\"\n                  value={this.state.searchVal}\n                  size=\"large\"\n                  onChange={(e) => this.setState({ searchVal: e.target.value })}\n                  onSearch={value => this.onButtonClicked(value)}\n                />\n              </div> \n            </div>\n            :\n            <div style={{ padding: '200px 40px'}}>\n              <Text id=\"main-heading\" type=\"secondary\" style={{ fontSize: '36px', color:\"white\" }}>Introduce tu nombre de usuario:</Text>\n              <br></br><br></br><br></br><br></br>\n              <Search\n                placeholder=\"Escribe tu nombre...\"\n                enterButton=\"Registrate\"\n                size=\"large\"\n                onSearch={value => this.setState({ isLoggedIn: true, userName: value })}\n              />\n            </div>\n          }\n          </div>\n        )\n    }\n}"]},"metadata":{},"sourceType":"module"}