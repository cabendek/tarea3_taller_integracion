{"ast":null,"code":"var express = require('express');\n\nvar app = express();\n\nvar server = require('http').Server(app);\n\nvar io = require('socket.io')(server); //import { LatLngExpression } from \"leaflet\";\n\n\nvar socket = io.connect('http://localhost:3000', {\n  'forceNew': true\n}); //var socket = io.connect('wss://tarea-3-websocket.2021-1.tallerdeintegracion.cl', \n//{path:'/position'});\n\nvar state = {\n  userName: 'Carlos',\n  isLogged: false,\n  messages: []\n};\nsocket.on('chat-message', function (data) {\n  state.messages.push(data);\n  console.log(data);\n  console.log(state.isLogged);\n  render(state.messages);\n});\n\nfunction render(data) {\n  var color = '#5faee3';\n  var html = data.map(function (elem, index) {\n    return `<div style='color:${color}'>\n                    <strong>${elem.name}</strong>:\n                    <em>${elem.message}</em>\n                    <h5>${elem.date}</h5>\n                </div>`;\n  }).join(\" \");\n  document.getElementById('messages').innerHTML = html;\n}\n\n;\n\nfunction addMessage(e) {\n  /*var logged = document.getElementById(\"username\").value\n  if (logged!='') {\n      state.isLogged=true\n  };*/\n  var payload = {\n    name: state.userName,\n    message: document.getElementById(\"texto\").value\n  };\n  socket.emit('new-chat-message', payload);\n  return false;\n}\n/*\nsocket.on('chat-message', function(msg) {\n    var item = document.createElement('li');\n    item.textContent = msg;\n    messages.appendChild(item);\n    window.scrollTo(0, document.body.scrollHeight);\n  });\n*/","map":{"version":3,"sources":["/Users/mac/Documents/Ingenieria/11vo Semestre/Taller de IntegracioÃÅn/Tarea 3/react-example/react-leaflet-demo-master/src/Chat.js"],"names":["express","require","app","server","Server","io","socket","connect","state","userName","isLogged","messages","on","data","push","console","log","render","color","html","map","elem","index","name","message","date","join","document","getElementById","innerHTML","addMessage","e","payload","value","emit"],"mappings":"AAAA,IAAIA,OAAO,GAAGC,OAAO,CAAC,SAAD,CAArB;;AACA,IAAIC,GAAG,GAAGF,OAAO,EAAjB;;AACA,IAAIG,MAAM,GAAGF,OAAO,CAAC,MAAD,CAAP,CAAgBG,MAAhB,CAAuBF,GAAvB,CAAb;;AACA,IAAIG,EAAE,GAAGJ,OAAO,CAAC,WAAD,CAAP,CAAqBE,MAArB,CAAT,C,CACA;;;AAEA,IAAIG,MAAM,GAAGD,EAAE,CAACE,OAAH,CAAW,uBAAX,EAAoC;AAAC,cAAW;AAAZ,CAApC,CAAb,C,CAEA;AACA;;AAGA,IAAIC,KAAK,GAAG;AACRC,EAAAA,QAAQ,EAAC,QADD;AAERC,EAAAA,QAAQ,EAAE,KAFF;AAGRC,EAAAA,QAAQ,EAAC;AAHD,CAAZ;AAMAL,MAAM,CAACM,EAAP,CAAU,cAAV,EAA0B,UAASC,IAAT,EAAc;AACpCL,EAAAA,KAAK,CAACG,QAAN,CAAeG,IAAf,CAAoBD,IAApB;AACAE,EAAAA,OAAO,CAACC,GAAR,CAAYH,IAAZ;AACAE,EAAAA,OAAO,CAACC,GAAR,CAAYR,KAAK,CAACE,QAAlB;AACAO,EAAAA,MAAM,CAACT,KAAK,CAACG,QAAP,CAAN;AAEH,CAND;;AASA,SAASM,MAAT,CAAgBJ,IAAhB,EAAsB;AAElB,MAAIK,KAAK,GAAG,SAAZ;AACA,MAAIC,IAAI,GAAGN,IAAI,CAACO,GAAL,CAAS,UAASC,IAAT,EAAeC,KAAf,EAAqB;AACrC,WAAS,qBAAoBJ,KAAM;8BACbG,IAAI,CAACE,IAAK;0BACdF,IAAI,CAACG,OAAQ;0BACbH,IAAI,CAACI,IAAK;uBAH5B;AAKH,GANU,EAMRC,IANQ,CAMH,GANG,CAAX;AAQAC,EAAAA,QAAQ,CAACC,cAAT,CAAwB,UAAxB,EAAoCC,SAApC,GAAgDV,IAAhD;AACH;;AAAA;;AAID,SAASW,UAAT,CAAoBC,CAApB,EAAuB;AACnB;;;;AAIA,MAAIC,OAAO,GAAG;AACVT,IAAAA,IAAI,EAAEf,KAAK,CAACC,QADF;AAEVe,IAAAA,OAAO,EAAEG,QAAQ,CAACC,cAAT,CAAwB,OAAxB,EAAiCK;AAFhC,GAAd;AAKA3B,EAAAA,MAAM,CAAC4B,IAAP,CAAY,kBAAZ,EAA+BF,OAA/B;AACA,SAAO,KAAP;AAEH;AAGD","sourcesContent":["var express = require('express');\nvar app = express();\nvar server = require('http').Server(app);\nvar io = require('socket.io')(server);\n//import { LatLngExpression } from \"leaflet\";\n\nvar socket = io.connect('http://localhost:3000', {'forceNew':true});\n\n//var socket = io.connect('wss://tarea-3-websocket.2021-1.tallerdeintegracion.cl', \n//{path:'/position'});\n\n\nvar state = {\n    userName:'Carlos',\n    isLogged: false,\n    messages:[]\n}\n\nsocket.on('chat-message', function(data){\n    state.messages.push(data);\n    console.log(data);\n    console.log(state.isLogged);\n    render(state.messages);\n\n});\n\n\nfunction render(data) {\n\n    var color = '#5faee3'\n    var html = data.map(function(elem, index){\n        return( `<div style='color:${color}'>\n                    <strong>${elem.name}</strong>:\n                    <em>${elem.message}</em>\n                    <h5>${elem.date}</h5>\n                </div>`);\n    }).join(\" \");\n    \n    document.getElementById('messages').innerHTML = html;\n};\n\n\n\nfunction addMessage(e) {\n    /*var logged = document.getElementById(\"username\").value\n    if (logged!='') {\n        state.isLogged=true\n    };*/\n    var payload = {\n        name: state.userName,\n        message: document.getElementById(\"texto\").value\n    }\n\n    socket.emit('new-chat-message',payload);\n    return false;\n\n}\n\n\n/*\nsocket.on('chat-message', function(msg) {\n    var item = document.createElement('li');\n    item.textContent = msg;\n    messages.appendChild(item);\n    window.scrollTo(0, document.body.scrollHeight);\n  });\n*/"]},"metadata":{},"sourceType":"module"}